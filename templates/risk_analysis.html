<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Risk Analysis</title>
    <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>
</head>
<body>
    <h2 style="text-align:center;">Risk Analysis of Portfolio</h2>

    <div style="text-align:center; margin-bottom: 20px;">
        <label for="tickerInput">Enter Ticker Symbol:</label>
        <input type="text" id="tickerInput" placeholder="e.g., AAPL">
        <button onclick="fetchRiskData()">Analyze</button>
    </div>

    <div id="riskPlot" style="width:90%; margin:auto;"></div>

    <script>
        function fetchRiskData() {
            const ticker = document.getElementById("tickerInput").value.trim().toUpperCase();
            if (!ticker) {
                alert("Please enter a ticker symbol.");
                return;
            }

            fetch(`/performance-metrics/risk/${ticker}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error("Ticker not found or server error.");
                    }
                    return response.json();
                })
                .then(data => {
                    Plotly.newPlot("riskPlot", data.data, data.layout);
                })
                .catch(error => {
                    console.error("Error fetching risk data:", error);
                    alert("Failed to fetch risk analysis. Please try another ticker.");
                });
        }
    </script>
</body>
</html>